#MIN_CONFIG(3.0.0)

AM_INIT_AUTOMAKE(krecipes, 0.3)
AC_C_BIGENDIAN
AC_CHECK_KDEMAXPATHLEN

dnl Default database
enable_mysql=yes
DATABASE_LIBS="-lmysqlclient -lsqlite"
dnl This isn't used yet, but it would be how to compile only the folder of the specified database
DATABASE_DIR="mysql"

AC_ARG_ENABLE(mysql-database, [  --enable-mysql-database ] [Use the MySQL database],enable_mysql=yes enable_sqlite=no)
AC_ARG_ENABLE(sqlite-database,[  --enable-sqlite-database] [Use the SQLite database; WARNING: Support for SQLite is not yet supported],enable_sqlite=yes enable_mysql=no)

if test "x$enable_mysql" == "xyes"; then
  AC_DEFINE(USE_MYSQL_DATABASE, 1, [Use the MySQL database])
  DATABASE_LIBS="-lsqlite -lmysqlclient"
  DATABASE_DIR="mysql"
elif test "x$enable_sqlite" == "xyes"; then
  AC_DEFINE(USE_SQLITE_DATABASE, 1, [Use the SQLite database])
  DATABASE_LIBS="-lmysqlclient -lsqlite"
  DATABASE_DIR="sqlite"
fi

dnl Right now, we have to include libraries for both; hopefully this will change in the future
AC_SUBST(DATABASE_LIBS)
AC_SUBST(DATABASE_DIR)
