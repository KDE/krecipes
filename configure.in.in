AM_INIT_AUTOMAKE(krecipes, 0.3)
AC_C_BIGENDIAN
AC_CHECK_KDEMAXPATHLEN

dnl ----- Check for existing MySQL ------

KDE_FIND_PATH(mysql_config, MYSQL_CONFIG, [${prefix}/bin ${exec_prefix}/bin /usr/local/bin /opt/local/b\
in /usr/bin /opt/mysql/bin /usr/local/mysql/bin ], [
  AC_MSG_WARN([Could not find MySQL anywhere, check http://www.mysql.com/])
])

if test -n "$MYSQL_CONFIG"; then
   mysql_incdir=`$MYSQL_CONFIG --cflags`
   mysql_libdir=`$MYSQL_CONFIG --libs`
   MYSQL_INC=$mysql_incdir
   MYSQL_LIBS=$mysql_libdir
   AC_SUBST(MYSQL_INC)
   AC_SUBST(MYSQL_LIBS)
   AC_DEFINE(HAVE_MYSQL, 1, [have MySQL])
   have_mysql="true"
else
	AC_DEFINE(HAVE_MYSQL, 0, [have MySQL])
	have_mysql="false"
fi

dnl ------ Check for the SQLite headers -----

AC_DEFUN(AC_HAVE_SQLITE,
[
        AC_DEFINE(HAVE_SQLITE, 1, [have SQLite])
        have_sqlite=true
])

AC_DEFUN(AC_NO_SQLITE,
[
        AC_DEFINE(HAVE_SQLITE, 0, [have SQLite])
        have_sqlite=false
])

KDE_CHECK_HEADER(sqlite.h,
        AC_HAVE_SQLITE,
        AC_NO_SQLITE
)


dnl ----------- Should I link or should I not link? ---------
AM_CONDITIONAL(link_lib_MYSQL, test x$have_mysql = xtrue)
AM_CONDITIONAL(link_lib_SQLITE, test x$have_sqlite = xtrue)

dnl ----------- Should Krecipes be built at all? ------------
if test "x$have_mysql" = "xfalse"; then
	if test "x$have_sqlite" = "xfalse"; then
	DO_NOT_COMPILE="$DO_NOT_COMPILE krecipes"
	will_not_build_krecipes=true
	fi
fi


